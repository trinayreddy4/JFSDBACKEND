package com.gradingsystem.admin.util;

import java.io.File;
import java.io.IOException;
import java.util.UUID;

import org.springframework.web.multipart.MultipartFile;

public class FileUtil {
	public static String generateRandomFileName(String originalFileName) {
        
        String fileExtension = originalFileName.substring(originalFileName.lastIndexOf("."));
        String randomUUID = UUID.randomUUID().toString();
        return randomUUID + fileExtension;
    }
	public static String uploadFile(MultipartFile file)
	{
		if (file.isEmpty()) {
//            return ResponseEntity.status(HttpStatus.SC_BAD_REQUEST).body("File is empty");
			return "Invalid";
        }

        try {
//        	System.out.println(file.getOriginalFilename());
        	String name = generateRandomFileName(file.getOriginalFilename());
        	String path = System.getProperty("user.dir")+"/src/main/resources/uploads" +"/" +name;
            File uploadedFile = new File(path);
            file.transferTo(uploadedFile);
            return path;
//            return ResponseEntity.status(HttpStatus.SC_OK).body("File uploaded successfully: " + file.getOriginalFilename());
        } catch (IOException e) {
        	return e.getMessage();
//            return ResponseEntity.status(HttpStatus.SC_INTERNAL_SERVER_ERROR).body("Failed to upload file");
        }
	}
}
